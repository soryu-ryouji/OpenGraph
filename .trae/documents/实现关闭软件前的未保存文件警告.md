## 问题分析

当用户点击关闭软件按钮时，系统会遍历所有项目并调用 `closeProject` 函数，对每个未保存的项目弹出保存询问。然而，这种方式存在风险：保存操作是异步的，可能在保存完成前软件就已关闭，导致文件损坏或丢失。

## 解决方案

在关闭窗口前，先检查是否有未保存的项目，如果有则弹出一个统一的警告对话框，告知用户有未保存文件，建议先手动保存，避免自动保存可能出现的问题。

## 实现步骤

1. **修改关闭窗口事件处理逻辑**：
   - 在 `App.tsx` 的 `onCloseRequested` 事件处理中，添加未保存项目检查
   - 如果存在未保存项目，弹出统一警告对话框
   - 根据用户选择决定是否继续关闭流程

2. **检查未保存项目**：
   - 遍历所有项目，检查其状态是否为 `ProjectState.Unsaved` 或 `ProjectState.Stashed`
   - 统计未保存项目数量

3. **弹出警告对话框**：
   - 使用现有的 `Dialog` 组件创建警告对话框
   - 显示未保存项目数量和警告信息
   - 提供 "继续关闭" 和 "取消" 两个选项

4. **处理用户选择**：
   - 如果用户选择 "继续关闭"，则执行原有的关闭流程
   - 如果用户选择 "取消"，则中止关闭流程

## 核心修改点

- 文件：`/Volumes/移动固态1/project-graph-1/app/src/App.tsx`
- 函数：`onCloseRequested` 事件处理函数（第262-280行）
- 新增逻辑：未保存项目检查和统一警告对话框

## 预期效果

- 当用户关闭软件时，如果有未保存文件，会先看到一个统一的警告
- 用户可以选择继续关闭（执行原有保存流程）或取消关闭（手动保存文件）
- 减少文件保存不完整的风险，提高用户数据安全性
- 增强用户体验，让用户更清楚当前的文件状态
